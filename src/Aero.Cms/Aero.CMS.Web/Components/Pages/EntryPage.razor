@page "/aero-entry"
@using Aero.CMS.Core.Content.Models
@using Aero.CMS.Web.Components.Pages
@inject IHttpContextAccessor HttpContextAccessor

@if (_content is not null)
{
    <DynamicComponent Type="@ResolveView(_content.ContentTypeAlias)"
                      Parameters="@(new Dictionary<string, object> { ["Page"] = _content })" />
}
else
{
    <h1 class="text-center py-20 text-gray-500">404 â€” Page not found</h1>
}

@code {
    private ContentDocument? _content;

    protected override void OnInitialized()
    {
        _content = HttpContextAccessor.HttpContext?
            .Items["AeroContent"] as ContentDocument;
    }

    private static Type ResolveView(string alias) => alias switch
    {
        "page" => typeof(PublicPageView),
        _      => typeof(NotFound)
    };
}
