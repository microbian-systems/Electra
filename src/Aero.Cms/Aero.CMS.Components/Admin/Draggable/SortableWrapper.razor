@using Microsoft.JSInterop

<CascadingValue Value="this">
    @ChildContent
</CascadingValue>

@code {
    [Parameter] public RenderFragment ChildContent { get; set; }
    [Parameter] public EventCallback OnDataChanged { get; set; }

    private readonly Dictionary<string, object> _sortables = new();

    public void RegisterSortable(string id, object sortable)
    {
        if (!string.IsNullOrEmpty(id))
        {
            _sortables[id] = sortable;
        }
    }

    public void UnregisterSortable(string id)
    {
        if (!string.IsNullOrEmpty(id))
        {
            _sortables.Remove(id);
        }
    }

    public object? GetSortable(string id)
    {
        if (string.IsNullOrEmpty(id)) return null;
        _sortables.TryGetValue(id, out var sortable);
        return sortable;
    }

    public async Task RefreshAsync()
    {
        await InvokeAsync(StateHasChanged);
    }
}
