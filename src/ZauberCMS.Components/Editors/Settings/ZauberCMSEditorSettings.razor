@using ZauberCMS.Components.Editors.Models
@implements ZauberCMS.Core.Content.Interfaces.IContentPropertySettings<ZauberCMS.Components.Editors.Models.ZauberCMSEditorSettingsModel>

<EditorRow>
    <LeftColumn>
        <PropertyInfo Name="Height" Description="Optional initial height (e.g., 300px, 50vh). Leave empty for default."/>
    </LeftColumn>
    <CentreColumn>
        <RadzenTextBox @bind-Value="@Settings.Height" Style="width: 100%;" Placeholder="e.g., 300px" />
    </CentreColumn>
</EditorRow>

<EditorRow>
    <LeftColumn>
        <PropertyInfo Name="Toolbar Layout" Description="Choose between full-featured or simple toolbar"/>
    </LeftColumn>
    <CentreColumn>
        <RadzenDropDown @bind-Value="@Settings.ToolbarLayout" 
                        Data="@ToolbarLayouts" 
                        Style="width: 100%;" />
    </CentreColumn>
</EditorRow>

<EditorRow>
    <LeftColumn>
        <PropertyInfo Name="Allow Base64 Upload" Description="Allow uploading images as base64 (requires increased SignalR message size)"/>
    </LeftColumn>
    <CentreColumn>
        <RadzenSwitch @bind-Value="@Settings.AllowBase64ImageUpload" />
    </CentreColumn>
</EditorRow>

<RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.Right" AlignItems="AlignItems.Center" class="rz-mt-3">
    <RadzenButton ButtonType="ButtonType.Submit" ButtonStyle="ButtonStyle.Success" Text="Store Settings" Click="Save" />
</RadzenStack>

@code {
    [Parameter] public string? SettingsModel { get; set; }
    [Parameter] public EventCallback<string> ValueChanged { get; set; }
    public ZauberCMSEditorSettingsModel Settings { get; set; } = new();

    private List<string> ToolbarLayouts = ["Full", "Minimal"];

    protected override void OnInitialized()
    {
        Settings = this.GetPropertySettings();
    }

    private async Task Save()
    {
        await this.SavePropertySettings(Settings);
    }
}